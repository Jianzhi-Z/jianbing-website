<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="dark light">
  <title><%= typeof title !== 'undefined' && title ? title + ' - ' : '' %><%= siteTitle %></title>
  <meta name="description" content="<%= typeof description !== 'undefined' && description ? description : siteDescription %>">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#EEF2FF',
              100: '#E0E7FF',
              200: '#C7D2FE',
              300: '#A5B4FC',
              400: '#818CF8',
              500: '#6366F1',
              600: '#4F46E5',
              700: '#4338CA',
              800: '#3730A3',
              900: '#312E81',
            },
            secondary: {
              500: '#F59E0B',
              600: '#D97706',
            },
            dark: {
              bg: '#0F172A',
              surface: '#1E293B',
              elevated: '#334155',
              border: '#475569',
              text: '#F1F5F9',
              'text-secondary': '#94A3B8',
            }
          },
          fontFamily: {
            sans: ['Inter', 'PingFang SC', 'Microsoft YaHei', 'sans-serif'],
            mono: ['JetBrains Mono', 'Fira Code', 'Consolas', 'monospace'],
          },
        }
      }
    }
  </script>
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <style>
    .text-gradient {
      background: linear-gradient(135deg, #6366F1 0%, #818CF8 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .avatar-glow {
      box-shadow: 0 0 60px rgba(99, 102, 241, 0.4);
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }
    
    /* Markdown 样式 */
    .markdown-body { font-size: 1rem; line-height: 1.8; }
    .markdown-body h1 { font-size: 2rem; font-weight: 700; margin: 2rem 0 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #475569; }
    .markdown-body h2 { font-size: 1.5rem; font-weight: 600; margin: 1.5rem 0 1rem; padding-bottom: 0.3rem; border-bottom: 1px solid #475569; }
    .markdown-body h3 { font-size: 1.25rem; font-weight: 600; margin: 1.5rem 0 0.75rem; }
    .markdown-body h4 { font-size: 1.1rem; font-weight: 600; margin: 1rem 0 0.5rem; }
    .markdown-body p { margin: 1rem 0; }
    .markdown-body ul, .markdown-body ol { margin: 1rem 0; padding-left: 2rem; }
    .markdown-body ul { list-style-type: disc; }
    .markdown-body ol { list-style-type: decimal; }
    .markdown-body li { margin: 0.5rem 0; }
    .markdown-body li > ul, .markdown-body li > ol { margin: 0.5rem 0; }
    .markdown-body code { background: #1E293B; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 0.9em; color: #E2E8F0; }
    .markdown-body pre { background: #0F172A; padding: 1rem; border-radius: 8px; overflow-x: auto; margin: 1rem 0; border: 1px solid #334155; }
    .markdown-body pre code { background: none; padding: 0; color: #E2E8F0; }
    .markdown-body blockquote { border-left: 4px solid #6366F1; padding-left: 1rem; margin: 1rem 0; color: #94A3B8; font-style: italic; }
    .markdown-body blockquote p { margin: 0.5rem 0; }
    .markdown-body img { max-width: 100%; border-radius: 8px; margin: 1rem 0; }
    .markdown-body a { color: #818CF8; text-decoration: none; }
    .markdown-body a:hover { text-decoration: underline; }
    .markdown-body hr { border: none; border-top: 1px solid #475569; margin: 2rem 0; }
    .markdown-body table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
    .markdown-body th, .markdown-body td { border: 1px solid #475569; padding: 0.75rem; text-align: left; }
    .markdown-body th { background: #1E293B; font-weight: 600; }
    .markdown-body tr:nth-child(even) { background: rgba(30, 41, 59, 0.5); }
    .markdown-body input[type="checkbox"] { margin-right: 0.5rem; }
    .markdown-body strong { font-weight: 600; color: #F1F5F9; }
    .markdown-body em { font-style: italic; }
    .markdown-body del { text-decoration: line-through; opacity: 0.7; }
    
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #1E293B; }
    ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #6366F1; }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .animate-fade-in {
      animation: fadeIn 0.6s ease-out forwards;
    }
    
    .mobile-menu {
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .mobile-menu.open {
      transform: translateX(0);
    }
  </style>
</head>
<body class="bg-dark-bg text-dark-text font-sans antialiased">
  <!-- 导航栏 -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-dark-bg/80 backdrop-blur-md border-b border-dark-border">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="/" class="flex items-center space-x-2 text-primary-500 hover:text-primary-400 transition-colors">
          <i data-lucide="zap" class="w-6 h-6"></i>
          <span class="font-bold text-lg">煎饼</span>
        </a>
        
        <div class="hidden md:flex items-center space-x-8">
          <a href="/" class="nav-link <%= path === '/' ? 'text-primary-500' : 'text-dark-text-secondary hover:text-dark-text' %> transition-colors">首页</a>
          <a href="/articles" class="nav-link <%= path === '/articles' ? 'text-primary-500' : 'text-dark-text-secondary hover:text-dark-text' %> transition-colors">文章</a>
          <a href="/products" class="nav-link <%= path === '/products' ? 'text-primary-500' : 'text-dark-text-secondary hover:text-dark-text' %> transition-colors">产品</a>
          <a href="/about" class="nav-link <%= path === '/about' ? 'text-primary-500' : 'text-dark-text-secondary hover:text-dark-text' %> transition-colors">关于</a>
        </div>
        
        <div class="flex items-center space-x-4">
          <button id="theme-toggle" class="p-2 rounded-lg hover:bg-dark-surface transition-colors" aria-label="切换主题">
            <i data-lucide="sun" class="w-5 h-5"></i>
          </button>
          <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-dark-surface transition-colors" aria-label="菜单">
            <i data-lucide="menu" class="w-5 h-5"></i>
          </button>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- 移动端菜单 -->
  <div id="mobile-menu" class="mobile-menu fixed inset-y-0 right-0 z-50 w-64 bg-dark-surface shadow-xl md:hidden">
    <div class="p-6">
      <button id="close-menu" class="absolute top-4 right-4 p-2 hover:bg-dark-elevated rounded-lg">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
      <div class="mt-8 space-y-4">
        <a href="/" class="block py-2 <%= path === '/' ? 'text-primary-500' : 'text-dark-text-secondary' %>">首页</a>
        <a href="/articles" class="block py-2 <%= path === '/articles' ? 'text-primary-500' : 'text-dark-text-secondary' %>">文章</a>
        <a href="/products" class="block py-2 <%= path === '/products' ? 'text-primary-500' : 'text-dark-text-secondary' %>">产品</a>
        <a href="/about" class="block py-2 <%= path === '/about' ? 'text-primary-500' : 'text-dark-text-secondary' %>">关于</a>
      </div>
    </div>
  </div>
  
  <main class="pt-16 min-h-screen">
    <%- body %>
  </main>
  
  <footer class="bg-dark-surface border-t border-dark-border mt-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-4 md:mb-0">
          <div class="flex items-center space-x-2 text-primary-500 mb-2">
            <i data-lucide="zap" class="w-5 h-5"></i>
            <span class="font-bold">煎饼</span>
          </div>
          <p class="text-dark-text-secondary text-sm">AI行动家 · 专注智能体与编程</p>
        </div>
        <div class="flex space-x-6">
          <a href="https://github.com" target="_blank" class="text-dark-text-secondary hover:text-primary-500 transition-colors">
            <i data-lucide="github" class="w-5 h-5"></i>
          </a>
          <a href="https://twitter.com" target="_blank" class="text-dark-text-secondary hover:text-primary-500 transition-colors">
            <i data-lucide="twitter" class="w-5 h-5"></i>
          </a>
          <a href="mailto:hello@jianbing.dev" class="text-dark-text-secondary hover:text-primary-500 transition-colors">
            <i data-lucide="mail" class="w-5 h-5"></i>
          </a>
        </div>
      </div>
      <div class="border-t border-dark-border mt-8 pt-8 text-center text-dark-text-secondary text-sm">
        <p>&copy; <%= new Date().getFullYear() %> 煎饼. All rights reserved.</p>
      </div>
    </div>
  </footer>
  
  <script>
    lucide.createIcons();
    
    const themeToggle = document.getElementById('theme-toggle');
    const html = document.documentElement;
    
    const savedTheme = localStorage.getItem('theme') || 'dark';
    html.classList.toggle('dark', savedTheme === 'dark');
    
    themeToggle.addEventListener('click', () => {
      html.classList.toggle('dark');
      const isDark = html.classList.contains('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });
    
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMenuBtn = document.getElementById('close-menu');
    
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.add('open');
    });
    
    closeMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.remove('open');
    });
    
    document.addEventListener('click', (e) => {
      if (!mobileMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
        mobileMenu.classList.remove('open');
      }
    });
    
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-fade-in');
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);
    
    document.querySelectorAll('[data-animate]').forEach(el => {
      el.style.opacity = '0';
      observer.observe(el);
    });
  </script>
</body>
</html>
